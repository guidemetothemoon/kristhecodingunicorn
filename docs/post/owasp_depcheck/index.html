<!DOCTYPE html>
<html
  dir="ltr"
  lang="en"
  data-theme="dark"
  
    class="html theme--dark"
  
><head>
  <title>
    Kris - The Coding Unicorn
        |
        Security scanning of third-party dependencies with OWASP Dependency Check
      

    

  </title>

  
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.115.4"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="author" content="Kris - The Coding Unicorn" />
  <meta
    name="description"
    content="This blog post explains why it&#39;s important to scan third-party dependencies for known security vulnerabilities and how this can be done with OWASP Dependency Check tool"
  />
  
    <meta name="google-site-verification" content="OQXmc6vSYyn6I-aGZoI6GH2M6CdM4NjmwulDqvvNCQA" />
  
    
    
    <link
      rel="stylesheet"
      href="/scss/main.min.772eefee9824c26da5d3828c2507ea318c8e7a37b0b1d18cd4f224edc2755fea.css"
      integrity="sha256-dy7v7pgkwm2l04KMJQfqMYyOejewsdGM1PIk7cJ1X&#43;o="
      crossorigin="anonymous"
      type="text/css"
    />
  

  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css"
    integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA="
    crossorigin="anonymous"
    type="text/css"
  />
  
    
    
    <link
      rel="stylesheet"
      href="/css/syntax.min.dd17d6ee5bba73cc3f814469aae150232f0fc13a2038e79772f4d25565b5a23c.css"
      integrity="sha256-3RfW7lu6c8w/gURpquFQIy8PwTogOOeXcvTSVWW1ojw="
      crossorigin="anonymous"
      media="screen"
    />
  
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css"
    integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css"
    integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css"
    integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css"
    integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link rel="shortcut icon" href="/favicons/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" />

  <link rel="canonical" href="https://kristhecodingunicorn.com/post/owasp_depcheck/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js"
    integrity="sha256-&#43;RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI="
    crossorigin="anonymous"
  ></script>

  

  <script
  async
  defer
  src="https://umami-guidemetothemoon.vercel.app/18352c56e4b049f69a24fbae0ca62b4f.js"
  data-website-id="9dd30a0e-3918-4513-b61d-4dd81e20ed4b"
></script>



  
  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://kristhecodingunicorn.com/images/site-feature-image.png"/>

<meta name="twitter:title" content="Security scanning of third-party dependencies with OWASP Dependency Check"/>
<meta name="twitter:description" content="This blog post explains why it&#39;s important to scan third-party dependencies for known security vulnerabilities and how this can be done with OWASP Dependency Check tool"/>



  
  <meta property="og:title" content="Security scanning of third-party dependencies with OWASP Dependency Check" />
<meta property="og:description" content="This blog post explains why it&#39;s important to scan third-party dependencies for known security vulnerabilities and how this can be done with OWASP Dependency Check tool" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kristhecodingunicorn.com/post/owasp_depcheck/" /><meta property="og:image" content="https://kristhecodingunicorn.com/images/site-feature-image.png"/><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-05-18T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-05-18T00:00:00+00:00" /><meta property="og:site_name" content="Kris - The Coding Unicorn" />



  
  
  
  
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "post",
        "name": "Security scanning of third-party dependencies with OWASP Dependency Check",
        "headline": "Security scanning of third-party dependencies with OWASP Dependency Check",
        "alternativeHeadline": "",
        "description": "
      This blog post explains why it\u0027s important to scan third-party dependencies for known security vulnerabilities and how this can be done with OWASP Dependency Check tool


    ",
        "inLanguage": "en",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/kristhecodingunicorn.com\/post\/owasp_depcheck\/"
        },
        "author" : {
            "@type": "Person",
            "name": "Kristina D."
        },
        "creator" : {
            "@type": "Person",
            "name": "Kristina D."
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "Kristina D."
        },
        "copyrightHolder" : {
            "@type": "Person",
            "name": "Kristina D."
        },
        "copyrightYear" : "2021",
        "dateCreated": "2021-05-18T00:00:00.00Z",
        "datePublished": "2021-05-18T00:00:00.00Z",
        "dateModified": "2021-05-18T00:00:00.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "Kristina D.",
            "url": "https://kristhecodingunicorn.com",
            "logo": {
                "@type": "ImageObject",
                "url": "https:\/\/kristhecodingunicorn.com\/favicons\/favicon-32x32.png",
                "width":"32",
                "height":"32"
            }
        },
        "image": 
      [
        
        "https://kristhecodingunicorn.com/images/site-feature-image.png"


      
      ]

    ,
        "url" : "https:\/\/kristhecodingunicorn.com\/post\/owasp_depcheck\/",
        "wordCount" : "2688",
        "genre" : [ ],
        "keywords" : [ 
      
      "devsecops"

    
      
        ,

      
      "cybersecurity-corner"

    
      
        ,

      
      "owasp"

    ]
    }
  </script>


</head>
<body class="body">
    <div class="wrapper">
      <aside
        
          class="wrapper__sidebar"
        
      ><div
  class="sidebar
    animated fadeInDown
  "
>
  <div class="sidebar__content">
    <div class="sidebar__introduction">
      <img
        class="sidebar__introduction-profileimage"
        src="/images/profile.webp"
        alt="profile picture"
      />
      
        <div class="sidebar__introduction-title">
          <a href="/">Kris - The Coding Unicorn</a>
        </div>
      
      <div class="sidebar__introduction-description">
        <p>Welcome to my tech corner! ü§ó <br />I preach about all things cloud native, green tech and cats üêà <br />Check "Blog" for new posts and "About" for my community involvement ü¶Ñ</p>
      </div>
    </div>
    <ul class="sidebar__list">
      
        <li class="sidebar__list-item">
          <a
            href="https://linkfree.io/guidemetothemoon"
            target="_blank"
            rel="noopener me"
            aria-label="Let&#39;s connect!"
            title="Let&#39;s connect!"
          >
            <i class="fas fa-cat fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
        <li class="sidebar__list-item">
          <a
            href="https://www.buymeacoffee.com/kristhecodingu1"
            target="_blank"
            rel="noopener me"
            aria-label="Help me buy supplies for homeless animals &lt;3"
            title="Help me buy supplies for homeless animals &lt;3"
          >
            <i class="fas fa-hand-holding-heart fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
        <li class="sidebar__list-item">
          <a
            href="https://feedly.com/i/subscription/feed%2Fhttps%3A%2F%2Fkristhecodingunicorn.com%2Findex.xml"
            target="_blank"
            rel="noopener me"
            aria-label="RSS feed"
            title="RSS feed"
          >
            <i class="fas fa-rss fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
    </ul>
  </div><footer class="footer footer__sidebar">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        2023 - Powered by Hugo
      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js"
    integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ="
    crossorigin="anonymous"
  ></script></div>
</aside>
      <main
        
          class="wrapper__main"
        
      >
        <header class="header"><div
  class="
    animated fadeInDown
  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
  </a>
  <nav class="nav">
    <ul class="nav__list" id="navMenu">
      
      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/"
              
              title=""
              >Home</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/post/"
              
              title=""
              >Blog</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/techtips/"
              
              title=""
              >Tech Tips</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/public/"
              
              title=""
              >Public Talks and Publications</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/about/"
              
              title=""
              >About</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/contact/"
              
              title=""
              >Contact</a
            >
          </li>
        

      
    </ul>
    <ul class="nav__list nav__list--end">
      
      
    </ul>
  </nav>
</div>
</header>
  <div
    class="post 
      animated fadeInDown
    "
  >
    
    <div class="post__content">
      <h1>Security Scanning of Third-Party Dependencies With OWASP Dependency Check</h1>
      
        <ul class="post__meta">
          <li class="post__meta-item">
            <em class="fas fa-calendar-day post__meta-icon"></em>
            <span class="post__meta-text"
              >
                
                  18/5/2021
                

              
            </span>
          </li>
          <li class="post__meta-item">
            <em class="fas fa-stopwatch post__meta-icon"></em>
            <span class="post__meta-text">13-minute read</span>
          </li>
        </ul>
      <div class="toc">
  <nav id="TableOfContents">
  <ul>
    <li><a href="#why-should-you-care-about-security-of-third-party-dependencies">Why should you care about security of third-party dependencies</a></li>
    <li><a href="#what-is-owasp-dependency-check-odc">What is OWASP Dependency Check (ODC)</a></li>
    <li><a href="#adding-owasp-dependency-check-to-build-pipeline">Adding OWASP Dependency Check to build pipeline</a></li>
    <li><a href="#how-to-analyze-and-fix-build-errors-triggered-by-owasp-dependency-check">How to analyze and fix build errors triggered by OWASP Dependency Check</a></li>
  </ul>
</nav>
</div>
<h2 id="why-should-you-care-about-security-of-third-party-dependencies">Why should you care about security of third-party dependencies</h2>
<p>No matter how small the application you're developing is, at some point you'll end up using code that has been developed by someone else, i.e. you'll be adding third-party dependencies to your source code. Deciding on when you should create a specific functionality yourself or when you should utilize a third-party library depends on the security and privacy requirements for your application, time restrictions, maintenance cost, available resources, size of implementation and many other factors. I will not go into detail about when you should choose what, but I would like to underline that it's important to evaluate every case individually and perform third-party risk assessment where possible.</p>
<p>Let's take a look at one example where we could introduce a third-party dependency. I'm developing a web application for my online store and one of the important requirements I would define for it is resilience. When the application is up and running in production and is being accessed by a lot of users from all over the world, there are many factors that can affect how the application performs and responds to hundreds, or even millions of simultaneous requests targeting it. In order to make my application resilient and self-healing I would like to implement resilience features like retry logic for specific operations, fallback to a defined behaviour upon failure, circuit breakers, etc.</p>
<p><strong>How can I do that?</strong> Well, I can either develop this functionality myself or I could utilize one of the well-established, open-source third-party libraries out there. Like, for instance, <a href="https://github.com/App-vNext/Polly">Polly</a>. That's when third-party dependencies come into picture. All the code that your application uses (for example, in form of NuGet packages or even framework libraries) which you and your team haven't written yourself and don't have control over - that code is typically a third-party dependency. Missing control of the third-party code is the key point here: you can't assume that developers of third-party dependencies take security seriously enough. And even if they do take it seriously, no code is perfectly secure and impenetrable - security holes may suddenly be discovered in a specific, previously known as secure, version of the dependency. That's when you need to have a process in place so that you can get informed in case you're using a vulnerable version of the dependency and need to upgrade to a newer version, install a security patch or remove the dependency from your project.</p>
<p>A process like this can be implemented with help of Software Composition Analysis tool like OWASP Dependency Check.</p>
<p><strong>What is Software Composition Analysis (SCA) ?</strong> This is a process of managing open-source components in your application. With help of SCA tools you can get more visibility into external dependencies being used, including transitive dependencies (the ones included by external components). SCA tool can be included in the build pipeline for continuous scanning of third-party dependencies - this is also an important part of DevSecOps adoption.</p>
<p>Now, let's see what OWASP Dependency Check tool is and how it can be included in your build pipeline.</p>
<h2 id="what-is-owasp-dependency-check-odc">What is OWASP Dependency Check (ODC)</h2>
<p><img src="../../images/owasp_depcheck/owasp_logo.jpg" alt="OWASP logo"></p>
<p><a href="https://owasp.org/">The Open Web Application Security Project</a> (OWASP) is a nonpofit foundation whose main goal is to improve software security. OWASP stands behind several open-source software projects that are used by thousands of developers and organizations worldwide for security strengthening of their software. You might also have heard about &quot;OWASP Top 10&quot; which is a document that is continuously updated by OWASP and defines 10 most critical security risks for web applications. If you haven't read it yeat, I do recommend you to check it out: <a href="https://www.owasptopten.org/">The OWASP Top Ten</a>.</p>
<p>What I also love about OWASP is that some of their core values are openness, inclusion and integrity:</p>
<ul>
<li>all materials are free and easily available,</li>
<li>all projects are open-source and vendor neutral,</li>
<li>anyone can participate in the OWASP community and contribute to improvement of software security,</li>
<li>OWASP community is inclusive, respectful, engaging and supportive.</li>
</ul>
<p>OWASP Dependency Check (ODC) is one of the tools created by OWASP, obviously. The tool was first published in 2012 and has since then evolved quite a lot - it has had over 100 releases, and almost 200 developers from all over the world have contributed to making ODC such a great tool that it is today. Jeremy Long is the lead architect and developer for the tool and is the one who actively maintains and contributes to keeping the tool updated on <a href="https://github.com/jeremylong/DependencyCheck">GitHub</a>. ODC is available both as command line tool, Azure DevOps extension, Maven/Gradle/Jenkins/SonarQube plugin and several others. ODC fully supports scanning of .NET and Java applications, and it also has several experimental analyzers for other languages, like Python and Ruby, that can be enabled on-demand.</p>
<p><strong>So how does ODC work?</strong> It will scan through all the project dependencies and try to detect if any of those dependencies include publicly disclosed vulnerabilities. ODC does this by collecting as much information as possible about each dependency in order to identify The Common Platform Enumeration (CPE). If CPE is identified, it will add all associated Common Vulnerability and Exposure(CVE) entries in the report. Main data source used by ODC are National Vulnerability Database(NVD) data feeds provided by <a href="https://nvd.nist.gov/vuln/data-feeds">NIST</a>, but additional feeds, like Sonatype OSS Index, can be utilized.</p>
<h2 id="adding-owasp-dependency-check-to-build-pipeline">Adding OWASP Dependency Check to build pipeline</h2>
<p>As I mentioned in the above section, OWASP Dependency Check has several plugins available but the one I'll be showing today is an Azure Pipelines plugin. First of all, you'll need to download OWASP Dependency Check extension to Azure DevOps in order to create a respective build task in your pipeline.</p>
<p>Go to <a href="https://marketplace.visualstudio.com/items?itemName=dependency-check.dependencycheck">OWASP Dependency Check for Azure Pipelines</a> page in Azure DevOps Marketplace and click &quot;Get it free&quot;. You will be navigated to a new page where you can either choose an existing Azure DevOps organization to automatically add this extension to, or you can download the extension directly by clicking &quot;Download&quot; in order to manually upload it to your Azure DevOps server later.</p>
<p><img src="../../images/owasp_depcheck/owasp_extension.jpg" alt="Screenshot for OWASP Dependency Check Azure DevOps extension"></p>
<p>The extension is already installed for my Azure DevOps organization so you may need to check if requested extension must be approved by the administrator after you've added it, before you can start using it in your build pipeline.</p>
<p>Next step is to add a build task to your pipeline in order to continuously perform security scanning. OWASP Dependency Check supports several file type analyzers, you can find an overview here: <a href="https://jeremylong.github.io/DependencyCheck/analyzers/index.html">File Type Analyzers</a>. You can, for example, use <a href="https://jeremylong.github.io/DependencyCheck/analyzers/nuspec-analyzer.html">Nuspec</a> analyzer that will parse NuGet package specification file, or <a href="https://jeremylong.github.io/DependencyCheck/analyzers/nugetconf-analyzer.html">Nugetconf</a> analyzer that will parse NuGet packages.config file. In my case we're using centralized management of NuGet package versions so we can't use any one of the mentioned file type analyzers. Therefore, we've decided to use <a href="https://jeremylong.github.io/DependencyCheck/analyzers/assembly-analyzer.html">Assembly</a> analyzer to perform security scanning of all .NET .dll and .exe files in our applicaiton.</p>
<p>Security scanning may take time, especially when you have quite big application with hundreds of assemblies, therefore I would recommend to create a separate job in your build pipeline that will execute security-related tasks in parallell with the rest of the build tasks. Another benefit is that, as you add more security controls to the build pipeline, you can group them under the same build job, and have a central place where all security controls are defined. It will then be much easier for you and other developers or even security auditors to get an overview of all security checks implemented as part of the application's secure development lifecycle.</p>
<blockquote>
<p>Please note that initially OWASP Dependency Check Azure DevOps extension supported only Windows build agents but since 2020 support for running on Linux build agents has been introduced. In order to start running ODC Azure DevOps extension on Linux build agents, you need to ensure that your Azure Pipelines Job is using Linux build agent (see vmImage property in code snippet below) and that you're using latest version of the task - <code>dependency-check-build-task@6</code>. If you're using <code>dependency-check-build-task@5</code>, you will need to update it to version 6 since version 5 only supports running on Windows.</p>
</blockquote>
<p>Here's an example of how such security job can look like:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl">- <span class="nt">job</span><span class="p">:</span><span class="w"> </span><span class="l">myrepo_security_job</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">pool</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">vmImage</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;ubuntu-latest&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">steps</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l">DotNetCoreCLI@2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Build myrepo solution&#39;</span><span class="w"> </span><span class="c"># In order to scan assemblies and executables I need to build my application code first</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">inputs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;build&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">projects</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;**/*.sln&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">arguments</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;--configuration $(BuildConfiguration)&#39;</span><span class="w"> </span><span class="c"># $(BuildConfiguration) = &#39;Release&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l">dependency-check-build-task@6</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;OWASP Dependency Check scan of third-party dependencies&#39;</span><span class="w"> </span><span class="c"># This task will perform security scan of third-party dependencies</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">inputs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">projectName</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;myrepo&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">scanPath</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;$(Build.SourcesDirectory)/**/bin/$(BuildConfiguration)/net5.0/*.dll&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">failOnCVSS</span><span class="p">:</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="c"># Fail the build if vulnerabilities with CVSS score higher than 8 are discovered</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;HTML, JUNIT&#39;</span><span class="w"> </span><span class="c"># Format of scan result report</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">suppressionPath</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;$(Build.SourcesDirectory)/suppression-file.xml&#39;</span><span class="w"> </span><span class="c"># File where all the suppressed vulnerabilities are defined</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">enableExperimental</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># Enable experimental file type analyzers</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">additionalArguments</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;--scan $(Build.SourcesDirectory)/**/bin/$(BuildConfiguration)/net5.0-windows/*.dll&#39;</span><span class="w"> </span><span class="c"># Additional folder to scan</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">dependencyCheckVersion</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;7.1.2&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l">PublishTestResults@2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Publish OWASP Dependency Check security scan results&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">inputs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">testResultsFormat</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;JUnit&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">testResultsFiles</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;dependency-check/*junit.xml&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">searchFolder</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;$(Common.TestResultsDirectory)&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">testRunTitle</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Dependency Check&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">buildConfiguration</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;$(BuildConfiguration)&#39;</span></span></span></code></pre></div>
<p>Now every time the build is triggered, a security job will perform security scanning of all .dll and .exe files that have been generated for my application. In case any known vulnerability with CVSS score higher than 8 is discovered and the discovered vulnerability hasn't been suppressed, the build will fail which means that I will need to fix the error and handle the discovered vulnerability before the code can be merged to master.</p>
<p>One of the build tasks publishes scan results for each build so we can check in more detail what vulnerabilities have been discovered during scanning, what the CVSS scores are for each vulnerability, where each vulnerability was registered, etc. In the example above I have defined 2 formats for the report:</p>
<ol>
<li><strong>JUnit</strong> report provides possibility to integrate with Azure Pipelines so that the scan results will be displayed in &quot;Tests&quot; section of the build together with other test results, for example from unit test execution. If we go to &quot;Tests&quot; tab, we'll be able to get an overview of all the scanned assemblies and in case any of them contain known vulnerabilities, we can just click on those in order to get more information about what has been discovered:</li>
</ol>
<p><img src="../../images/owasp_depcheck/owasp_test_result_junit.jpg" alt="Screenshot for OWASP Dependency Check scan result JUnit report"></p>
<ol start="2">
<li><strong>HTML</strong> report will be published as a build artifact which you can download so that you can browse the scan results locally:</li>
</ol>
<p><img src="../../images/owasp_depcheck/owasp_test_result_html.jpg" alt="Screenshot for OWASP Dependency Check scan result HTML report"></p>
<p>As you can see, it's pretty easy to enable continuous security scanning with OWASP Dependency Check as part of CI/CD pipeline. Different values like CVSS score (failOnCVSS) or format of scan result report (format) can be adjusted, depending on secure development practices in your team.</p>
<h2 id="how-to-analyze-and-fix-build-errors-triggered-by-owasp-dependency-check">How to analyze and fix build errors triggered by OWASP Dependency Check</h2>
<p>Now that we've enabled continuous security scanning of third-party dependencies with OWASP Dependency Check, we need to be prepared for fixing discovered vulnerabilities. Let's say that I've just executed the build pipeline and it has failed during security scanning with an error message saying that a vulnerability has been discovered in one of the application's assemblies with CVSS score higher than 8.</p>
<p><strong>How can we proceed from here?</strong> First, we'll open the report and locate the assemblies with CVSS score 8 or higher. Then we'll need to analyze each assembly individually and decide how to fix the discovered vulnerability. You can find more information on how to read OWASP Dependency Check report here: <a href="https://jeremylong.github.io/DependencyCheck/general/thereport.html">How to read the reports</a>.</p>
<p>There are two possible scenarios:</p>
<ol>
<li>
<p><strong>Assembly version being used is vulnerable</strong> and you will need to either remove the dependency from the application's code (in case it's not needed anymore or can't be made secure at this point) or update to a version that does not have any registered vulnerabilities. Typically, you will need to check what NuGet package the assembly belongs to and what non-vulnerable version it must be updated to. If assembly is part of the application's framework (like .NET 5 in our case) you can perform the steps described in scenario #2.</p>
</li>
<li>
<p>The discovered vulnerability is:</p>
</li>
</ol>
<ul>
<li>
<p><strong>A false positive</strong>: false positives can be reported as GitHub issues in the official OWASP Dependency Check <a href="https://github.com/jeremylong/DependencyCheck/issues">repository</a>. Until the issue is fixed in the tool, you will probably need to suppress the vulnerability - see how you can do that below.</p>
</li>
<li>
<p><strong>A framework-specific vulnerability</strong>: unless this is a zero-day vulnerability, it can normally be fixed by installing a security patch provided by the framework owners (f.ex., a security patch for .NET 5 provided by Microsoft). You can check what patch must be installed by searching for CVE id that the vulnerability was published for (linked in the scan result report). After the patch is installed on your application servers you can suppress the vulnerability - see how you can do that below.</p>
</li>
</ul>
<p><strong>How can I suppress the vulnerability?</strong></p>
<p>If you need to suppress the vulnerability, you will need to create a suppression file (or update one if it already exists in the repository). You can place the file in the root of your source code repository but it can also be placed in a different location - as you saw earlier, location for the suppression file must be provided in the build task for OWASP Dependency Check (suppressionPath). Add a new &lt;suppress&gt; -node to the bottom of the suppression XML with a comment describing why this vulnerability is being suppressed. If you have several assemblies that are linked to the same vulnerability with the same CVE, you can include those in the same suppression node, as shown in the example below. Some vulnerabilities may have been published with multiple CVE-s and in that case you will need to suppress the vulnerability for every CVE it was registered with. If you have projects that have separate binary output folders, you will need to add a separate suppression node for every binary output folder where this assembly exists. You can find more information about suppressing vulnerabilities here: <a href="https://jeremylong.github.io/DependencyCheck/general/suppression.html">Suppressing False Positives</a>.</p>
<p>Here is an example of a suppression definition for a vulnerability related to MS Office 2013 that can be fixed by installing a security patch provided by Microsoft:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="c">&lt;!--Vulnerability is related to Office 2013 and a security fix must be deployed for customers 
</span></span></span><span class="line"><span class="cl"><span class="c">        using Office 2013: https://docs.microsoft.com/en-us/security-updates/securitybulletins/2015/ms15-059#affected-software--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;suppress&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&lt;notes&gt;</span><span class="cp">&lt;![CDATA[
</span></span></span><span class="line"><span class="cl"><span class="cp">       file name: Microsoft.Office.Client.Education.dll
</span></span></span><span class="line"><span class="cl"><span class="cp">       file name: Microsoft.Office.Client.TranslationServices.dll
</span></span></span><span class="line"><span class="cl"><span class="cp">       ]]&gt;</span><span class="nt">&lt;/notes&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&lt;filePath</span> <span class="na">regex=</span><span class="s">&#34;true&#34;</span><span class="nt">&gt;</span>.*\bMY_ASSEMBLY_FOLDER.*\bMicrosoft.Office.Client.*\b.dll<span class="nt">&lt;/filePath&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&lt;cve&gt;</span>CVE-2015-1770<span class="nt">&lt;/cve&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/suppress&gt;</span></span></span></code></pre></div>
<p>First of all, we've added a comment about why the vulnerability is being suppressed so that other developers in the team will not question it. Then we've listed all the assemblies this vulnerability was discovered for - we want to suppress the vulnerability only for the assemblies it has been discovered for. If we add new assemblies in the future, we would still like to know if those assemblies are affected by the same vulnerability instead of letting it go undetected - that's how we can get a bigger picture and clearer understanding of what the security state is for all of the external dependencies we're using in the application. Next we've defined the location of assemblies and/or executables the vulnerability was discovered for - when multiple files are affected, regular expressions can be used to provide the file path. Lastly we've provided a Common Vulnerability and Exposure id that the vulnerability was published for - in case it was published for multiple CVE-s, we'll need to create additional suppression nodes for the remaining CVE-s.</p>
<p>And that's it - after the suppression file is added to the application's source code repository, we can re-trigger the build and it will no longer fail due to this vulnerability.</p>
<p>That's it from me this time, thanks for checking in! If you would like to know more about OWASP Dependency Check, you can find official documentation for the tool here: <a href="https://jeremylong.github.io/DependencyCheck">https://jeremylong.github.io/DependencyCheck</a></p>
<p>If this article was helpful, I'd love to hear about it! You can reach out to me on LinkedIn, GitHub or by using the contact form on this page :)</p>
<p>Stay secure, stay safe.</p>
<p>Till we connect again!</p>
</div>
    <div class="post__footer">
      

      
        <span><a class="tag" href="/tags/devsecops/">devsecops</a><a class="tag" href="/tags/cybersecurity-corner/">cybersecurity-corner</a><a class="tag" href="/tags/owasp/">owasp</a></span>


      
    </div>

    
  </div>

      </main>
    </div><footer class="footer footer__base">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        2023 - Powered by Hugo
      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js"
    integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ="
    crossorigin="anonymous"
  ></script></body>
</html>
